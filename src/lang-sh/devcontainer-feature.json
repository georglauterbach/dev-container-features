// ref: https://github.com/devcontainers/spec/blob/main/schemas/devContainerFeature.schema.json
// cSpell: ignore timonwong
{
  "id": "lang-sh",
  "version": "0.2.0",
  "name": "Programming Language | Bash",
  "documentationURL": "https://github.com/georglauterbach/dev-container-features/tree/main/src/lang-sh",
  "description": "Work efficiently and effortlessly with Bash",
  "options": {
    "copy-libbash": {
      "description": "whether to copy [`libbash`](https://github.com/georglauterbach/libbash) v9.0.0 to `/usr/local/lib/`",
      "type": "boolean",
      "default": true
    }
  },
  "customizations": {
    "vscode": {
      "extensions": [
        "mads-hartmann.bash-ide-vscode",
        "timonwong.shellcheck"
      ],
      "settings": {
        // disable the ShellCheck integration of 'mads-hartmann.bash-ide-vscode'
        // to not clash with 'timonwong.shellcheck'
        "bashIde.shellcheckPath": "",
        // use file-relative path resolution for 'source' statements
        "shellcheck.useWorkspaceRootAsCwd": false,
        // disable needlessly aggressive lints
        "shellcheck.exclude": [
          "2310", // functions invoked in `if` with `set -e`
          "2312" // invoke command separately to avoid masking return values
        ],
        // run ShellCheck when the editor is saved
        "shellcheck.run": "onSave",
        // supply custom arguments to make the most use of ShellCheck
        "shellcheck.customArgs": [
          "--rcfile=/usr/local/share/dev_containers/features/ghcr_io/georglauterbach/lang_bash/shellcheck.conf"
        ]
      }
    }
  }
}
